webpackJsonp([0],{147:function(e,t,n){"use strict";function r(e){n(153)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(155),o=n(161),a=n(18),s=r,u=a(i.a,o.a,s,null,null);t.default=u.exports},153:function(e,t,n){var r=n(154);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(44)("f922f752",r,!0)},154:function(e,t,n){t=e.exports=n(43)(!0),t.push([e.i,".button{text-transform:uppercase}","",{version:3,sources:["/home/travis/build/kelvin-wong/kelvin-wong.github.io/pages/timer.vue"],names:[],mappings:"AACA,QACE,wBAA0B,CAC3B",file:"timer.vue",sourcesContent:["\n.button {\n  text-transform: uppercase;\n}\n"],sourceRoot:""}])},155:function(e,t,n){"use strict";var r=n(156),i=n.n(r),o=n(3),a=n(45),s=n(160),u=n.n(s),l={},c=!1;o.default.use(a.default),t.a={components:{MaskedInput:u.a},store:new a.default.Store({state:{timer:0,time:"",timeInterval:null,audioBuffer:null,bufferSource:null},mutations:{countdown:function(e){e.timer--},reset:function(e){clearInterval(e.timeInterval),e.timer=0,e.time="",e.timeInterval=null,e.bufferSource=null}},actions:{startCount:function(e){var t=e.commit,n=e.state,r=e.dispatch,o=/(\d)m(\d+)s/g,a=o.exec(n.time),s=i()(a,3),u=s[1],l=s[2];n.timer=60*parseInt(u)+parseInt(l),n.timeInterval=setInterval(function(){if(t("countdown"),0===n.timer&&(clearInterval(n.timeInterval),r("startAlarm")),(n.timer%10==0||n.timer<=5)&&n.timer>0)if(c){var e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}),i=document.getElementById("safari");i.dispatchEvent(e)}else r("speak")},1e3)},startAlarm:function(e){var t=e.state;if(t.audioBuffer){var n=new l.AudioContext,r=n.createBufferSource(),i=n.createGain();i.gain.value=50,r.buffer=t.audioBuffer,r.connect(i),i.connect(n.destination),r.connect(n.destination),r.start(0),t.bufferSource=r}},stopAlarm:function(e){var t=e.state;t.bufferSource&&t.bufferSource.stop(0)},resetState:function(e){var t=e.commit;(0,e.dispatch)("stopAlarm"),t("reset")},speak:function(e){var t=e.state,n=l.SpeechSynthesis,r=n.getVoices(),i=void 0;r.forEach(function(e){"zh-hk"===e.lang.toLowerCase()&&(i=e),null===i&&"en-us"===e.lang.toLowerCase()&&(i=e)}),setTimeout(function(){var e=new l.SpeechSynthesisUtterance(t.timer);e.voice=i,e.pitch=1.2,e.rate=.8,e.volume=1,n.speak(e)},0)}}}),head:{title:"Workout Timer"},methods:{countdown:function(){this.$store.dispatch("startCount")},stop:function(){this.$store.dispatch("stopAlarm")},reset:function(){this.$store.dispatch("resetState")},speak:function(){this.$store.dispatch("speak")}},mounted:function(){c=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),l.AudioContext="webkitAudioContext"in window?window.webkitAudioContext:window.AudioContext,l.SpeechSynthesis=window.speechSynthesis||window.SpeechSynthesis||window.webkitspeechSynthesis||window.webkitSpeechSynthesis,l.SpeechSynthesisUtterance=window.SpeechSynthesisUtterance||window.webkitSpeechSynthesisUtterance;var e=new l.AudioContext,t=new XMLHttpRequest,n=this;t.open("GET","/alarm.mp3",!0),t.responseType="arraybuffer",t.onload=function(){e.decodeAudioData(t.response,function(t){n.$store.state.audioBuffer=t,e.close()},function(e){console.dir(e)})},t.send()}}},156:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(157),o=r(i),a=n(47),s=r(a);t.default=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},157:function(e,t,n){e.exports={default:n(158),__esModule:!0}},158:function(e,t,n){n(28),n(27),e.exports=n(159)},159:function(e,t,n){var r=n(46),i=n(1)("iterator"),o=n(13);e.exports=n(0).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},160:function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.conformToMask=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2);Object.defineProperty(t,"conformToMask",{enumerable:!0,get:function(){return r(o).default}});var a=n(5),s=r(a);t.default={render:function(e){var t=this;return e("input",{ref:"input",domProps:{value:this.value},on:{input:function(e){return t.updateValue(e.target.value)},focus:function(e){return t.emitEvent(e)},blur:function(e){return t.emitEvent(e)},keypress:function(e){return t.emitEvent(e)}}})},name:"masked-input",props:{value:{type:String,required:!1,default:""},mask:{type:[Array,Function,Boolean,Object],required:!0},guide:{type:Boolean,required:!1},placeholderChar:{type:String,required:!1},keepCharPositions:{type:Boolean,required:!1},pipe:{type:Function,required:!1},showMask:{type:Boolean,required:!1}},mounted:function(){this.bind()},methods:{createTextMaskInputElement:s.default,bind:function(){this.textMaskInputElement=this.createTextMaskInputElement(i({inputElement:this.$refs.input},this.$options.propsData)),this.updateValue(this.value)},updateValue:function(e){this.textMaskInputElement.update(e),this.$emit("input",this.$refs.input.value)},emitEvent:function(e){this.$emit(e.type,e)}},watch:{mask:function(e){this.mask!==e&&this.bind()},guide:function(){this.bind()},placeholderChar:function(){this.bind()},keepCharPositions:function(){this.bind()},pipe:function(){this.bind()},showMask:function(){this.bind()}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.placeholderChar="_"},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.guide,s=void 0===r||r,u=n.previousConformedValue,l=void 0===u?a:u,c=n.placeholderChar,d=void 0===c?o.placeholderChar:c,f=n.placeholder,p=void 0===f?(0,i.convertMaskToPlaceholder)(t,d):f,v=n.currentCaretPosition,h=n.keepCharPositions,m=!1===s&&void 0!==l,g=e.length,b=l.length,y=p.length,C=t.length,w=g-b,k=w>0,S=v+(k?-w:0),x=S+Math.abs(w);if(!0===h&&!k){for(var P=a,_=S;_<x;_++)p[_]===d&&(P+=d);e=e.slice(0,S)+P+e.slice(S,g)}for(var O=e.split(a).map(function(e,t){return{char:e,isNew:t>=S&&t<x}}),M=g-1;M>=0;M--){var A=O[M].char;if(A!==d){A===p[M>=S&&b===C?M-w:M]&&O.splice(M,1)}}var T=a,E=!1;e:for(var I=0;I<y;I++){var V=p[I];if(V===d){if(O.length>0)for(;O.length>0;){var j=O.shift(),$=j.char,B=j.isNew;if($===d&&!0!==m){T+=d;continue e}if(t[I].test($)){if(!0===h&&!1!==B&&l!==a&&!1!==s&&k){for(var q=O.length,N=null,R=0;R<q;R++){var F=O[R];if(F.char!==d&&!1===F.isNew)break;if(F.char===d){N=R;break}}null!==N?(T+=$,O.splice(N,1)):I--}else T+=$;continue e}E=!0}!1===m&&(T+=p.substr(I,y));break}T+=V}if(m&&!1===k){for(var L=null,J=0;J<T.length;J++)p[J]===d&&(L=J);T=null!==L?T.substr(0,L+1):a}return{conformedValue:T,meta:{someCharsRejected:E}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(3),o=n(1),a=""},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.placeholderChar;if(-1!==e.indexOf(t))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is: "+JSON.stringify(t)+"\n\nThe mask that was received is: "+JSON.stringify(e));return e.map(function(e){return e instanceof RegExp?t:e}).join("")}function i(e){return"string"==typeof e||e instanceof String}function o(e){return"number"==typeof e&&void 0===e.length&&!isNaN(e)}function a(e){for(var t=[],n=void 0;-1!==(n=e.indexOf(l));)t.push(n),e.splice(n,1);return{maskWithoutCaretTraps:e,indexes:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.convertMaskToPlaceholder=r,t.isString=i,t.isNumber=o,t.processCaretTraps=a;var s=n(1),u=[],l="[]"},function(e,t){"use strict";function n(e){var t=e.previousConformedValue,n=void 0===t?i:t,o=e.previousPlaceholder,a=void 0===o?i:o,s=e.currentCaretPosition,u=void 0===s?0:s,l=e.conformedValue,c=e.rawValue,d=e.placeholderChar,f=e.placeholder,p=e.indexesOfPipedChars,v=void 0===p?r:p,h=e.caretTrapIndexes,m=void 0===h?r:h;if(0===u)return 0;var g=c.length,b=n.length,y=f.length,C=l.length,w=g-b,k=w>0,S=0===b;if(w>1&&!k&&!S)return u;var x=k&&(n===l||l===f),P=0,_=void 0,O=void 0;if(x)P=u-w;else{var M=l.toLowerCase(),A=c.toLowerCase(),T=A.substr(0,u).split(i),E=T.filter(function(e){return-1!==M.indexOf(e)});O=E[E.length-1];var I=a.substr(0,E.length).split(i).filter(function(e){return e!==d}).length,V=f.substr(0,E.length).split(i).filter(function(e){return e!==d}).length,j=V!==I,$=void 0!==a[E.length-1]&&void 0!==f[E.length-2]&&a[E.length-1]!==d&&a[E.length-1]!==f[E.length-1]&&a[E.length-1]===f[E.length-2];!k&&(j||$)&&I>0&&f.indexOf(O)>-1&&void 0!==c[u]&&(_=!0,O=c[u]);for(var B=v.map(function(e){return M[e]}),q=B.filter(function(e){return e===O}).length,N=E.filter(function(e){return e===O}).length,R=f.substr(0,f.indexOf(d)).split(i).filter(function(e,t){return e===O&&c[t]!==e}).length,F=R+N+q+(_?1:0),L=0,J=0;J<C;J++){var U=M[J];if(P=J+1,U===O&&L++,L>=F)break}}if(k){for(var G=P,W=P;W<=y;W++)if(f[W]===d&&(G=W),f[W]===d||-1!==m.indexOf(W)||W===y)return G}else if(_){for(var D=P-1;D>=0;D--)if(l[D]===O||-1!==m.indexOf(D)||0===D)return D}else for(var z=P;z>=0;z--)if(f[z-1]===d||-1!==m.indexOf(z)||0===z)return z}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=[],i=""},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:t,update:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=r.inputElement,l=r.mask,d=r.guide,g=r.pipe,y=r.placeholderChar,C=void 0===y?v.placeholderChar:y,w=r.keepCharPositions,k=void 0!==w&&w,S=r.showMask,x=void 0!==S&&S;if(void 0===n&&(n=i.value),n!==t.previousConformedValue){(void 0===l?"undefined":u(l))===b&&void 0!==l.pipe&&void 0!==l.mask&&(g=l.pipe,l=l.mask);var P=void 0,_=void 0;if(l instanceof Array&&(P=(0,p.convertMaskToPlaceholder)(l,C)),!1!==l){var O=a(n),M=i.selectionEnd,A=t.previousConformedValue,T=t.previousPlaceholder,E=void 0;if((void 0===l?"undefined":u(l))===h){if(!1===(_=l(O,{currentCaretPosition:M,previousConformedValue:A,placeholderChar:C})))return;var I=(0,p.processCaretTraps)(_),V=I.maskWithoutCaretTraps,j=I.indexes;_=V,E=j,P=(0,p.convertMaskToPlaceholder)(_,C)}else _=l;var $={previousConformedValue:A,guide:d,placeholderChar:C,pipe:g,placeholder:P,currentCaretPosition:M,keepCharPositions:k},B=(0,f.default)(O,_,$),q=B.conformedValue,N=(void 0===g?"undefined":u(g))===h,R={};N&&(R=g(q,s({rawValue:O},$)),!1===R?R={value:A,rejected:!0}:(0,p.isString)(R)&&(R={value:R}));var F=N?R.value:q,L=(0,c.default)({previousConformedValue:A,previousPlaceholder:T,conformedValue:F,placeholder:P,rawValue:O,currentCaretPosition:M,placeholderChar:C,indexesOfPipedChars:R.indexesOfPipedChars,caretTrapIndexes:E}),J=F===P&&0===L,U=x?P:m,G=J?U:F;t.previousConformedValue=G,t.previousPlaceholder=P,i.value!==G&&(i.value=G,o(i,L))}}}}}function o(e,t){document.activeElement===e&&(y?C(function(){return e.setSelectionRange(t,t,g)},0):e.setSelectionRange(t,t,g))}function a(e){if((0,p.isString)(e))return e;if((0,p.isNumber)(e))return String(e);if(void 0===e||null===e)return m;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value received was:\n\n "+JSON.stringify(e))}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=i;var l=n(4),c=r(l),d=n(2),f=r(d),p=n(3),v=n(1),h="function",m="",g="none",b="object",y="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),C="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout}])})},161:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("h1",{staticClass:"title"},[e._v(e._s(e.$store.state.timer)+" seconds")]),n("div",{staticClass:"field"},[n("div",{staticClass:"control"},[n("masked-input",{staticClass:"input is-large",attrs:{type:"text",placeholder:"0m00s",guide:!0,mask:[/\d/,"m",/\d/,/\d/,"s"],placeholderChar:"_"},model:{value:e.$store.state.time,callback:function(t){e.$store.state.time=t},expression:"$store.state.time"}})],1)]),n("div",{staticClass:"field is-grouped is-grouped-centered"},[n("div",{staticClass:"control"},[n("a",{staticClass:"button is-large is-primary",on:{click:e.countdown}},[e._v("Go")])]),n("div",{staticClass:"control"},[n("a",{staticClass:"button is-large is-warning",on:{click:e.stop}},[e._v("Stop")])]),n("div",{staticClass:"control"},[n("a",{staticClass:"button is-large is-danger",on:{click:e.reset}},[e._v("Reset")])]),n("a",{staticClass:"hidden",attrs:{id:"safari"},on:{click:e.speak}})])])},i=[],o={render:r,staticRenderFns:i};t.a=o}});
//# sourceMappingURL=0.nuxt.bundle.7063f03710c93b3bff00.js.map